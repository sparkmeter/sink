stages:
    - test

image: elixir:1.10.4

test:
  before_script:
    - git config --global url."https://gitlab-ci-token:${CI_JOB_TOKEN}@gitlab.com/sparkmeter/zappy/avrora.git".insteadOf git@gitlab.com:sparkmeter/zappy/avrora.git
    - mix local.hex --force
    - mix local.rebar --force
  stage: test
  script:
    - mix deps.get
    - mix test